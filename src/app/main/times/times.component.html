<div class="p-grid">
  <div class="header p-col-12">
    <h2>
      Timesheets
    </h2>
  </div>

  <p-table #dt
           [columns]="columns"
           [value]="timesheetData"
           class="p-col-12"
           sortField="startTime"
           [sortOrder]="1">
    <ng-template pTemplate="header">
      <tr>
        <th *ngFor="let column of columns"
            [pSortableColumn]="column.field"
            scope="col">
          {{column.header}}
          <p-sortIcon [field]="column.field"></p-sortIcon>
        </th>
      </tr>
      <tr>
        <th *ngFor="let column of columns"
            scope="col">
          <ng-container *ngIf="column.field === 'project'">
            <p-dropdown
              (onChange)="dt.filter($event.value,column.field, 'equals')"
              [options]="projects"
              appendTo="body"
              styleClass="p-column-filter"></p-dropdown>
          </ng-container>
        </th>
      </tr>
    </ng-template>
    <ng-template let-rowData pTemplate="body">
      <tr>
        <ng-container *ngFor="let column of columns">
          <td [ngSwitch]="column.type">
            <ng-container *ngSwitchCase="'time'">
              {{rowData[column.field] | date: 'HH:mm'}}
            </ng-container>
            <ng-container *ngSwitchCase="'date'">
              {{rowData[column.field] | date}}
            </ng-container>
            <ng-container *ngSwitchDefault>
              {{rowData[column.field]}}
            </ng-container>
          </td>
        </ng-container>
      </tr>
    </ng-template>
  </p-table>
</div>
